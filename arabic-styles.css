/* ===================================================
   Fluent Arabic Web v3.0 - Enhanced Arabic Styles
   =================================================== */

/* --- تعريف الخطوط المحلية --- */
@font-face {
  font-family: "Noto Naskh Arabic Local";
  src: url("chrome-extension://__MSG_@@extension_id__/fonts/NotoNaskhArabic-Regular.woff2")
    format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* استخدام نفس الخط للوزن العريض */
@font-face {
  font-family: "Noto Naskh Arabic Local";
  src: url("chrome-extension://__MSG_@@extension_id__/fonts/NotoNaskhArabic-Regular.woff2")
    format("woff2");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* ===================================================
   الأنماط الأساسية - تُطبق فقط مع الفئة .arabic-enhancer-active
   =================================================== */

/* الاتجاه العام */
html.arabic-enhancer-active {
  direction: rtl;
}

/* العناصر النصية الرئيسية */
html.arabic-enhancer-active body,
html.arabic-enhancer-active .message,
html.arabic-enhancer-active [class*="message"],
html.arabic-enhancer-active [role="log"] > *,
html.arabic-enhancer-active [role="textbox"],
html.arabic-enhancer-active [role="button"],
html.arabic-enhancer-active summary {
  direction: rtl !important;
  text-align: right !important;
  font-family: "Noto Naskh Arabic Local", "Segoe UI", "Noto Sans Arabic",
    sans-serif !important;
}

/* حقول الإدخال */
html.arabic-enhancer-active textarea,
html.arabic-enhancer-active
  input:not([type="button"]):not([type="submit"]):not([type="reset"]):not(
    [type="checkbox"]
  ):not([type="radio"]):not([type="file"]):not([type="image"]):not(
    [type="range"]
  ):not([type="color"]) {
  direction: rtl !important;
  text-align: right !important;
  font-family: "Noto Naskh Arabic Local", "Segoe UI", "Noto Sans Arabic",
    sans-serif !important;
}

/* الأزرار والقوائم */
html.arabic-enhancer-active button,
html.arabic-enhancer-active select {
  direction: rtl !important;
  font-family: "Noto Naskh Arabic Local", "Segoe UI", "Noto Sans Arabic",
    sans-serif !important;
}

/* ===================================================
   العناصر النصية العامة
   =================================================== */

html.arabic-enhancer-active p,
html.arabic-enhancer-active
  div:not([class*="code"]):not([class*="pre"]):not([class*="syntax"]),
html.arabic-enhancer-active span:not([class*="code"]):not([class*="token"]),
html.arabic-enhancer-active li,
html.arabic-enhancer-active td,
html.arabic-enhancer-active th,
html.arabic-enhancer-active label,
html.arabic-enhancer-active h1,
html.arabic-enhancer-active h2,
html.arabic-enhancer-active h3,
html.arabic-enhancer-active h4,
html.arabic-enhancer-active h5,
html.arabic-enhancer-active h6,
html.arabic-enhancer-active blockquote,
html.arabic-enhancer-active figcaption,
html.arabic-enhancer-active legend,
html.arabic-enhancer-active caption {
  font-family: "Noto Naskh Arabic Local", "Segoe UI", "Noto Sans Arabic",
    sans-serif;
  unicode-bidi: plaintext;
}

/* ===================================================
   تحسينات التباعد والقراءة
   =================================================== */

html.arabic-enhancer-active
  *:not(code):not(pre):not(kbd):not(samp):not(input):not(textarea):not(
    button
  ):not(select):not(option):not(svg):not(svg *):not([class*="icon"]):not(i):not(
    [class*="code"]
  ):not([class*="token"]) {
  letter-spacing: 0.01em;
  word-spacing: 0.05em;
}

/* تحسين الفقرات */
html.arabic-enhancer-active p {
  line-height: 1.8 !important;
  margin-bottom: 1em;
}

/* تحسين عناصر القائمة */
html.arabic-enhancer-active li {
  line-height: 1.7;
}

/* تحسين العناوين */
html.arabic-enhancer-active h1,
html.arabic-enhancer-active h2,
html.arabic-enhancer-active h3,
html.arabic-enhancer-active h4,
html.arabic-enhancer-active h5,
html.arabic-enhancer-active h6 {
  line-height: 1.4;
}

/* ===================================================
   الحفاظ على LTR لعناصر الكود
   =================================================== */

html.arabic-enhancer-active pre,
html.arabic-enhancer-active code,
html.arabic-enhancer-active kbd,
html.arabic-enhancer-active samp,
html.arabic-enhancer-active var,
html.arabic-enhancer-active tt,
html.arabic-enhancer-active [class*="code"],
html.arabic-enhancer-active [class*="syntax"],
html.arabic-enhancer-active [class*="highlight"],
html.arabic-enhancer-active [class*="prism"],
html.arabic-enhancer-active [class*="hljs"],
html.arabic-enhancer-active .token,
html.arabic-enhancer-active .editor,
html.arabic-enhancer-active .monaco-editor,
html.arabic-enhancer-active .kix-appview-editor,
html.arabic-enhancer-active [contenteditable="true"][role="textbox"] {
  direction: ltr !important;
  text-align: left !important;
  font-family: "JetBrains Mono", "Fira Code", Consolas, "Courier New", monospace !important;
  letter-spacing: normal !important;
  word-spacing: normal !important;
  line-height: 1.5 !important;
  unicode-bidi: embed !important;
}

/* ===================================================
   إصلاحات التخطيط
   =================================================== */

/* تم حذف قاعدة flex-direction: row-reverse الخطيرة */

/* إصلاح الهوامش والحشوات */
html.arabic-enhancer-active [style*="margin-left"]:not(pre):not(code) {
  margin-right: var(--original-margin-left, inherit);
}

html.arabic-enhancer-active [style*="padding-left"]:not(pre):not(code) {
  padding-right: var(--original-padding-left, inherit);
}

/* إصلاح عناصر Float */
html.arabic-enhancer-active img[style*="float: left"],
html.arabic-enhancer-active figure[style*="float: left"] {
  float: right !important;
  margin-left: 1em !important;
  margin-right: 0 !important;
}

html.arabic-enhancer-active img[style*="float: right"],
html.arabic-enhancer-active figure[style*="float: right"] {
  float: left !important;
  margin-right: 1em !important;
  margin-left: 0 !important;
}

/* ===================================================
   إصلاحات الجداول
   =================================================== */

html.arabic-enhancer-active table {
  direction: rtl;
}

html.arabic-enhancer-active th,
html.arabic-enhancer-active td {
  text-align: right !important;
}

/* ===================================================
   إصلاحات القوائم
   =================================================== */

html.arabic-enhancer-active ul,
html.arabic-enhancer-active ol {
  padding-right: 2em;
  padding-left: 0;
}

html.arabic-enhancer-active ul ul,
html.arabic-enhancer-active ol ol,
html.arabic-enhancer-active ul ol,
html.arabic-enhancer-active ol ul {
  padding-right: 1.5em;
  padding-left: 0;
}

/* ===================================================
   إصلاحات النماذج
   =================================================== */

html.arabic-enhancer-active form {
  direction: rtl;
}

html.arabic-enhancer-active label {
  display: inline-block;
  text-align: right;
}

html.arabic-enhancer-active input[type="checkbox"],
html.arabic-enhancer-active input[type="radio"] {
  margin-left: 0.5em;
  margin-right: 0;
}

/* ===================================================
   إصلاحات الصفحات المترجمة
   =================================================== */

html.arabic-enhancer-active.arabic-enhancer-translated .skiptranslate,
html.arabic-enhancer-active.arabic-enhancer-translated .goog-te-banner-frame,
html.arabic-enhancer-active.arabic-enhancer-translated .goog-te-menu-frame {
  direction: ltr !important;
}

html.arabic-enhancer-active.arabic-enhancer-translated font[style] {
  direction: inherit;
}

/* ===================================================
   استثناءات - عناصر يجب تركها كما هي
   =================================================== */

/* أيقونات - حماية كاملة للخطوط مع أولوية عالية جداً */
html.arabic-enhancer-active .material-symbols-outlined,
html.arabic-enhancer-active .material-symbols-rounded,
html.arabic-enhancer-active .material-symbols-sharp,
html.arabic-enhancer-active [class*="material-symbols"],
html.arabic-enhancer-active .mat-icon,
html.arabic-enhancer-active .ms-Icon,
html.arabic-enhancer-active [class*="mat-icon"],
html.arabic-enhancer-active [class*="ms-Icon"],
html.arabic-enhancer-active .google-material-icons,
html.arabic-enhancer-active .google-symbols,
html.arabic-enhancer-active i[class*="icon"],
html.arabic-enhancer-active [class*="Icon"] {
  font-family: "Material Symbols Outlined", "Material Icons", "Segoe MDL2 Assets",
    inherit !important;
  direction: ltr !important;
  font-weight: normal !important;
  font-style: normal !important;
  text-transform: none !important;
  display: inline-block !important;
  white-space: nowrap !important;
  word-wrap: normal !important;
  -webkit-font-smoothing: antialiased !important;
  font-feature-settings: "liga" !important;
}

/* Font Awesome - أولوية عالية */
html.arabic-enhancer-active .fa,
html.arabic-enhancer-active .fas,
html.arabic-enhancer-active .far,
html.arabic-enhancer-active .fal,
html.arabic-enhancer-active .fab,
html.arabic-enhancer-active .fad,
html.arabic-enhancer-active [class*="fa-"] {
  font-family: "Font Awesome 6 Free", "Font Awesome 5 Free", "FontAwesome" !important;
  direction: ltr !important;
}

/* عناصر الوسائط */
html.arabic-enhancer-active video,
html.arabic-enhancer-active audio,
html.arabic-enhancer-active canvas,
html.arabic-enhancer-active iframe {
  direction: ltr !important;
}

/* أرقام */
html.arabic-enhancer-active [class*="number"],
html.arabic-enhancer-active [class*="price"],
html.arabic-enhancer-active [class*="amount"],
html.arabic-enhancer-active time {
  direction: ltr;
  unicode-bidi: embed;
}

/* ===================================================
   تحسينات الروابط
   =================================================== */

html.arabic-enhancer-active a {
  unicode-bidi: embed;
}

/* ===================================================
   تحسينات الإمكانية
   =================================================== */

/* تحسين التركيز */
html.arabic-enhancer-active :focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* تحسين التحديد */
html.arabic-enhancer-active ::selection {
  background-color: rgba(59, 130, 246, 0.3);
}

/* ===================================================
   إصلاحات خاصة بالمواقع الشائعة
   =================================================== */

/* YouTube - النص فقط */
html.arabic-enhancer-active ytd-comment-renderer,
html.arabic-enhancer-active #content-text,
html.arabic-enhancer-active ytd-video-primary-info-renderer #title,
html.arabic-enhancer-active ytd-video-secondary-info-renderer #description {
  direction: rtl !important;
  text-align: right !important;
}

/* YouTube - استثناء عناصر واجهة المستخدم من RTL */
html.arabic-enhancer-active yt-searchbox,
html.arabic-enhancer-active ytd-searchbox,
html.arabic-enhancer-active .ytSearchboxComponentHost,
html.arabic-enhancer-active #search-form,
html.arabic-enhancer-active #search-input,
html.arabic-enhancer-active #masthead,
html.arabic-enhancer-active #guide,
html.arabic-enhancer-active #guide-content,
html.arabic-enhancer-active ytd-mini-guide-renderer,
html.arabic-enhancer-active ytd-guide-renderer,
html.arabic-enhancer-active #start,
html.arabic-enhancer-active #end,
html.arabic-enhancer-active #center,
html.arabic-enhancer-active ytd-masthead,
html.arabic-enhancer-active #container.ytd-masthead,
html.arabic-enhancer-active #buttons,
html.arabic-enhancer-active ytd-topbar-menu-button-renderer {
  direction: ltr !important;
  text-align: left !important;
}

/* Twitter/X */
html.arabic-enhancer-active [data-testid="tweetText"] {
  direction: rtl !important;
  text-align: right !important;
}

/* Facebook */
html.arabic-enhancer-active [dir="auto"] {
  direction: rtl !important;
}

/* ===================================================
   استثناءات المقاطع البرمجية والمحررات
   =================================================== */

html.arabic-enhancer-active .monaco-editor,
html.arabic-enhancer-active .kix-appview-editor,
html.arabic-enhancer-active .cm-editor,
html.arabic-enhancer-active .CodeMirror,
html.arabic-enhancer-active [role="textbox"][aria-multiline="true"] {
  direction: ltr !important;
  text-align: left !important;
}

/* ===================================================
   استثناءات Claude AI
   =================================================== */

/* Claude - الشريط الجانبي والتخطيط الرئيسي */
html.arabic-enhancer-active [class*="fixed"][class*="left-0"],
html.arabic-enhancer-active [class*="sidebar"],
html.arabic-enhancer-active [class*="navigation"],
html.arabic-enhancer-active nav[class*="flex"],
html.arabic-enhancer-active aside,
html.arabic-enhancer-active [role="navigation"],
html.arabic-enhancer-active [class*="lg:bg-gradient"],
html.arabic-enhancer-active [class*="from-bg-"],
html.arabic-enhancer-active [class*="to-bg-"] {
  direction: ltr !important;
  left: 0 !important;
  right: auto !important;
  transform: none !important;
}

/* Claude - منطقة المحادثة فقط تكون RTL */
html.arabic-enhancer-active [class*="prose"],
html.arabic-enhancer-active [class*="message-content"],
html.arabic-enhancer-active [class*="markdown"],
html.arabic-enhancer-active .font-claude-message {
  direction: rtl !important;
  text-align: right !important;
}

/* Claude - استثناء الأزرار والتحكم */
html.arabic-enhancer-active [class*="absolute"][class*="bottom-"],
html.arabic-enhancer-active [class*="sticky"],
html.arabic-enhancer-active [class*="composer"],
html.arabic-enhancer-active [class*="input-area"],
html.arabic-enhancer-active [class*="toolbar"] {
  direction: ltr !important;
}

/* ===================================================
   استثناءات ChatGPT
   =================================================== */

html.arabic-enhancer-active [class*="nav-"],
html.arabic-enhancer-active [class*="sidebar"],
html.arabic-enhancer-active nav[class*="dark"],
html.arabic-enhancer-active [data-testid*="nav"],
html.arabic-enhancer-active [class*="conversation-list"] {
  direction: ltr !important;
  text-align: left !important;
}

/* ChatGPT - المحتوى فقط RTL */
html.arabic-enhancer-active [class*="markdown"],
html.arabic-enhancer-active [class*="prose"] {
  direction: rtl !important;
  text-align: right !important;
}

/* ===================================================
   استثناءات عامة لعناصر واجهة المستخدم
   =================================================== */

/* القوائم المنسدلة والنوافذ المنبثقة */
html.arabic-enhancer-active [role="menu"],
html.arabic-enhancer-active [role="listbox"],
html.arabic-enhancer-active [role="dialog"],
html.arabic-enhancer-active [role="tooltip"],
html.arabic-enhancer-active [class*="dropdown"],
html.arabic-enhancer-active [class*="popover"],
html.arabic-enhancer-active [class*="modal"],
html.arabic-enhancer-active [class*="overlay"] {
  direction: ltr !important;
}

/* أشرطة الأدوات والرؤوس */
html.arabic-enhancer-active header,
html.arabic-enhancer-active [role="banner"],
html.arabic-enhancer-active [class*="header"],
html.arabic-enhancer-active [class*="topbar"],
html.arabic-enhancer-active [class*="menubar"] {
  direction: ltr !important;
}

/* العناصر الثابتة والمطلقة */
html.arabic-enhancer-active [class*="fixed"][class*="top-"],
html.arabic-enhancer-active [class*="fixed"][class*="bottom-"],
html.arabic-enhancer-active [class*="absolute"][class*="top-"],
html.arabic-enhancer-active [class*="sticky"] {
  direction: ltr !important;
}

/* Flexbox containers التي قد تتأثر */
html.arabic-enhancer-active [class*="flex"][class*="justify-between"],
html.arabic-enhancer-active
  [class*="flex"][class*="items-center"][class*="gap-"] {
  direction: ltr !important;
}

/* ===================================================
   التوافق مع الطباعة
   =================================================== */

@media print {
  html.arabic-enhancer-active body {
    direction: rtl;
    font-family: "Noto Naskh Arabic", serif;
  }
}
